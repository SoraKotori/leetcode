#include "header.h"

// 3 9 0 2
// 39 90 02
// 3990 9002

// 380  902

// 3 4 7 8 9
// 34 47 78 89
// 3447 4778 7889
// 34474778 47787889

// 3218 4149

class Solution {
public:
    bool hasSameDigits(string s) {

        auto n2 = size(s) - 2;
        vector<int> coeffs(n2 + 1);
        __int128 coeff = 1;
        for (int i = 0; i <= n2; i++)
        {
            coeffs[i] = coeff % 10;
            coeff = coeff * (n2 - i) / (i + 1);
        }

        size_t f0 = 0, f1 = 0;
        for (size_t i = 0; i <= n2; i++) {
            size_t digit_1 = s[i] - '0';
            size_t digit_2 = s[i + 1] - '0';
            f0 = (f0 + coeffs[i] * digit_1) % 10;
            f1 = (f1 + coeffs[i] * digit_2) % 10;
        }
        
        return f0 == f1;
    }
};

int main()
{
    Solution sol;
    cout << sol.hasSameDigits("3902") << endl;
    cout << sol.hasSameDigits("34789") << endl;
    cout << sol.hasSameDigits("059223162476909414787217368465718889720070329493800526721646241144650386182915621907231953557681242064182905239381861256480822308801745728716464165805416272563074544781706952551993233233441914762054761669477046604260289688651191958433480070003587023200105113105431268932582314103774297291977036873970402534522915576764583200175755147667814674754512504911569655037494222537756410610151191257150195557437349822009352297672631564482185262565187532385279714260044303857829021469873315780358707063556775718248201658447824815265573818347949428248619384219498719969693539037903024755075964220907437734386614616595870073534174014967983825396") << endl;
}